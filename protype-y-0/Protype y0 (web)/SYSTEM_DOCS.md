
# دليل نظام Protype.AI

## نظرة عامة
Protype.AI هو نظام محادثة ذكي متقدم يتعلم باستمرار ويتكيف مع المستخدمين. يجمع النظام بين نماذج اللغة الكبيرة (LLMs) مثل Google Gemini، وقاعدة معرفة قابلة للتخصيص، وآليات تعلم مستمر لتقديم تجربة محادثة طبيعية ومفيدة.

## المكونات الرئيسية

### 1. مكون المحادثة (web_app.py)
- يوفر واجهة REST API للتفاعل مع النظام
- يستخدم نموذج Google Gemini للإجابة على الأسئلة
- يقوم بتحليل نوع السؤال وتطبيق "التفكير العميق"
- يتكامل مع البحث الداخلي والخارجي

### 2. نظام قاعدة البيانات (database.py)
- يخزن المعرفة في قاعدة بيانات SQLite
- يدعم عمليات البحث والاسترجاع
- يتتبع مصادر المعرفة ودرجة الثقة

### 3. نظام التعلم المستمر (learning_manager.py)
- يعمل في الخلفية لتحسين المعرفة
- يتعلم من مصادر متعددة (ويكيبيديا، Gemini)
- يحفظ سجلات التعلم ويدير الجلسات

### 4. معالجة المهام (celery_tasks.py)
- يوفر معالجة غير متزامنة للمهام طويلة الأمد
- يتعامل مع الاستعلامات الخارجية والمهام المعقدة
- يدعم التعلم الدفعي والمستمر

## كيف يعمل النظام

### 1. دورة المحادثة
1. يرسل المستخدم سؤالًا عبر واجهة الويب أو API
2. يحلل النظام السؤال لتحديد نوعه (واقعي، إجرائي، تفسيري، إلخ)
3. يبحث أولاً في قاعدة المعرفة الداخلية
4. إذا تم العثور على إجابة، يطبق "التفكير العميق" ويعيد الإجابة
5. إذا لم يتم العثور على إجابة، يستعلم نموذج Gemini
6. يحفظ السؤال والإجابة في قاعدة البيانات للاستخدام المستقبلي

### 2. عملية التعلم المستمر
1. يعمل نظام التعلم في خلفية خادم التطبيق
2. على فترات منتظمة، يختار موضوعًا أو سؤالًا للتعلم
3. يستخدم مصادر مختلفة (ويكيبيديا، Gemini) للحصول على معلومات
4. يستخرج المعرفة ويخزنها في قاعدة البيانات
5. يبني تدريجيًا رسم معرفي من الكيانات والعلاقات المستخرجة

### 3. آلية التفكير العميق
1. يحلل نوع السؤال (واقعي، تفسيري، مقارن، إلخ)
2. يختار قالب تفكير مناسب لهذا النوع من الأسئلة
3. يطبق القالب على الإجابة الأولية
4. يعززها بالمعرفة ذات الصلة من قاعدة البيانات
5. يقدم إجابة منظمة تناسب نوع السؤال

## لوحة التحكم

يوفر النظام لوحة تحكم شاملة للإدارة والمراقبة:

### ميزات لوحة التحكم
1. **إحصائيات المعرفة**: عرض عدد الأسئلة والإجابات والمصادر
2. **سجلات التعلم**: تتبع نشاط التعلم المستمر
3. **إدارة التعلم**: بدء/إيقاف عمليات التعلم المستمر
4. **التعلم الدفعي**: إضافة مواضيع مخصصة للتعلم
5. **تصور المعرفة**: عرض الرسم البياني للمعرفة وعلاقاته
6. **تقارير النظام**: توليد تقارير حول صحة النظام

### الوصول للوحة التحكم
- **واجهة الويب**: متاحة على `/dashboard`
- **واجهة API**: نقاط نهاية مثل `/dashboard-stats` و`/learning-logs`

## كيفية استخدام ميزات التعلم المخصص

### 1. إضافة معرفة مخصصة
يمكن للمستخدمين إضافة معرفة مخصصة عن طريق:
- استخدام نقطة نهاية API `/teach`
- استخدام واجهة لوحة التحكم "إضافة معرفة"

### 2. إضافة مواضيع للتعلم
يمكن إضافة مواضيع جديدة للتعلم المستمر من خلال:
- تحرير قائمة المواضيع في لوحة التحكم
- استخدام API `/add-topics`

### 3. توليد أسئلة التعلم
يستخدم النظام تقنيات مختلفة لتوليد أسئلة تعليمية:
- تحويل المواضيع إلى أسئلة معرفية
- استخدام أنماط الأسئلة المختلفة (ما هو، كيف، لماذا)
- تتبع النتائج وتحسين جودة الأسئلة مع مرور الوقت

## حل المشكلات الشائعة

### مشكلة: "Unknown field for GenerationConfig: response_mime_type"
**الحل**: تم إزالة معلمة `response_mime_type` من تكوين Gemini، لأنها غير مدعومة.

### مشكلة: عدم تحميل نموذج spaCy
**الحل**: تأكد من تنزيل النموذج المطلوب باستخدام:
```python
python -m spacy download en_core_web_sm
```

### مشكلة: فشل الاتصال بقاعدة البيانات
**الحل**: تأكد من وجود ملف قاعدة البيانات وامتلاك التطبيق أذونات الكتابة.

### مشكلة: Celery غير متاح
**الحل**: عند عدم توفر Celery، يعمل النظام في وضع المذكرة المحلية.

## ملاحظات الأداء

1. **الاستخدام النموذجي للذاكرة**: ~300MB عند تشغيل المكونات الأساسية
2. **استخدام وحدة المعالجة المركزية**: منخفض أثناء الخمول، يصل إلى ~30% أثناء المحادثة النشطة
3. **متطلبات التخزين**: يتطلب النظام ~50MB لكل 1000 عنصر معرفة
4. **الحد الأقصى للمستخدمين المتزامنين**: يدعم حتى 100 مستخدم مع التكوين الافتراضي
